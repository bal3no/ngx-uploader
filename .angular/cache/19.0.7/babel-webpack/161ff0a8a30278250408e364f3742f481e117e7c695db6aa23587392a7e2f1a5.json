{"ast":null,"code":"import { ElementRef, EventEmitter } from '@angular/core';\nimport { NgUploaderService } from './ngx-uploader.class';\nimport * as i0 from \"@angular/core\";\nexport let NgFileDropDirective = /*#__PURE__*/(() => {\n  class NgFileDropDirective {\n    elementRef;\n    options;\n    uploadInput;\n    uploadOutput;\n    upload;\n    el;\n    _sub;\n    constructor(elementRef) {\n      this.elementRef = elementRef;\n      this.uploadOutput = new EventEmitter();\n    }\n    ngOnInit() {\n      this._sub = [];\n      const concurrency = this.options && this.options.concurrency || Number.POSITIVE_INFINITY;\n      const allowedContentTypes = this.options && this.options.allowedContentTypes || ['*'];\n      const maxUploads = this.options && this.options.maxUploads || Number.POSITIVE_INFINITY;\n      const maxFileSize = this.options && this.options.maxFileSize || Number.POSITIVE_INFINITY;\n      this.upload = new NgUploaderService(concurrency, allowedContentTypes, maxUploads, maxFileSize);\n      this.el = this.elementRef.nativeElement;\n      this._sub.push(this.upload.serviceEvents.subscribe(event => {\n        this.uploadOutput.emit(event);\n      }));\n      if (this.uploadInput instanceof EventEmitter) {\n        this._sub.push(this.upload.initInputEvents(this.uploadInput));\n      }\n      this.el.addEventListener('drop', this.stopEvent, false);\n      this.el.addEventListener('dragenter', this.stopEvent, false);\n      this.el.addEventListener('dragover', this.stopEvent, false);\n    }\n    ngOnDestroy() {\n      if (this._sub) {\n        this._sub.forEach(sub => sub.unsubscribe());\n      }\n    }\n    stopEvent = e => {\n      e.stopPropagation();\n      e.preventDefault();\n    };\n    onDrop(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      const event = {\n        type: 'drop'\n      };\n      this.uploadOutput.emit(event);\n      this.upload.handleFiles(e.dataTransfer.files);\n    }\n    onDragOver(e) {\n      if (!e) {\n        return;\n      }\n      const event = {\n        type: 'dragOver'\n      };\n      this.uploadOutput.emit(event);\n    }\n    onDragLeave(e) {\n      if (!e) {\n        return;\n      }\n      const event = {\n        type: 'dragOut'\n      };\n      this.uploadOutput.emit(event);\n    }\n    static ɵfac = function NgFileDropDirective_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || NgFileDropDirective)(i0.ɵɵdirectiveInject(i0.ElementRef));\n    };\n    static ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n      type: NgFileDropDirective,\n      selectors: [[\"\", \"ngFileDrop\", \"\"]],\n      hostBindings: function NgFileDropDirective_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"drop\", function NgFileDropDirective_drop_HostBindingHandler($event) {\n            return ctx.onDrop($event);\n          })(\"dragover\", function NgFileDropDirective_dragover_HostBindingHandler($event) {\n            return ctx.onDragOver($event);\n          })(\"dragleave\", function NgFileDropDirective_dragleave_HostBindingHandler($event) {\n            return ctx.onDragLeave($event);\n          });\n        }\n      },\n      inputs: {\n        options: \"options\",\n        uploadInput: \"uploadInput\"\n      },\n      outputs: {\n        uploadOutput: \"uploadOutput\"\n      }\n    });\n  }\n  return NgFileDropDirective;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}